{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"backstage/mkdocs-monorepo-plugin","text":"<p>Note: This plugin is in beta. Whilst it is not expected to significantly change in functionality, it may not yet be fully compatible with other Mkdocs configuration and thus may break with some advanced configurations. Once these have been resolved and all bugs have been ironed out, we will move this to a stable release.</p> <p>\u271a This plugin enables you to build multiple sets of documentation in a single Mkdocs. It is designed to address writing documentation in Spotify's largest and most business-critical codebases (typically monoliths or monorepos).</p> <p>\u270f\ufe0f Blog Post | \ud83d\udc0d Python Package | \u271a Demo | \ud83d\udcd5 Docs</p>"},{"location":"#features","title":"Features","text":"<ul> <li> <p>Support for multiple <code>docs/</code> folders in Mkdocs. Having a single <code>docs/</code> folder in a large codebase is hard to maintain. Who owns which documentation? What code is it associated with? Bringing docs closer to the associated code enables you to update them better, as well as leverage folder-based features such as GitHub Codeowners.</p> </li> <li> <p>Support for multiple navigations. In Spotify, large repositories typically are split up by multiple owners. These are split by folders. By introducing multiple <code>mkdocs.yml</code> files along with multiple <code>docs/</code> folder, each team can take ownership of their own navigation. This plugin then intelligently merges of the documentation together into a single repository.</p> </li> <li> <p>Support across multiple repositories. Using Git Submodules it is possible to merge documentation across multiple repositories into a single codebase dynamically.</p> </li> <li> <p>The same great Mkdocs developer experience. It is possible to run <code>mkdocs serve</code> in the root to merge all of your documentation together, or in a subfolder to build specific documentation. Autoreload still works as usual. No more using symlinks!</p> </li> </ul>"},{"location":"#install","title":"Install","text":"<p>It's easy to get started using PyPI and <code>pip</code> using Python:</p> <pre><code>$ pip install mkdocs-monorepo-plugin\n</code></pre>"},{"location":"#usage","title":"Usage","text":"<p>Take a look at our sample project or do the following:</p> <ul> <li>In the root, add the <code>monorepo</code> to your <code>plugins</code> key in <code>mkdocs.yml</code></li> <li>Create a subfolder, with a <code>mkdocs.yml</code> with a <code>site_name</code> and <code>nav</code>, as well as a <code>docs/</code> folder with an <code>index.md</code></li> <li>Back in in the root <code>mkdocs.yml</code>, use the <code>!include</code> syntax in your <code>nav</code> to link to to a subfolder <code>mkdocs.yml</code></li> </ul> <p>Example root /mkdocs.yml</p> <pre><code>    site_name: Cats API\n\n    # You can declare \"!include\" statements here. This enables you\n    # to include mkdocs.yml that are located in subfolders. In this\n    # case we have two folders (v1/ and v2/) and wish to merge them\n    # into this single navigation. The 'Intro' and 'Authentication'\n    # files are located in the root docs/ folder as usual.\n\n    nav:\n      - Intro: 'index.md'\n      - Authentication: 'authentication.md'\n      - API:\n        - v1: '!include ./v1/mkdocs.yml'\n        - v2: '!include ./v2/mkdocs.yml'\n\n    plugins:\n      - monorepo\n</code></pre> <p>Example submodule /v1/mkdocs.yml</p> <pre><code>    # In this case, we use the site_name to figure out how we should merge\n# this with the root documentation. It should refer to a folder structure.\n# The example below will merge documentation as following:\n#\n#   reference.md -&gt; docs/versions/v1/reference.md -&gt; http://localhost:8000/versions/v1/reference/\n#   changelog.md -&gt; docs/versions/v1/changelog.md -&gt; http://localhost:8000/versions/v1/changelog/\n#\n\nsite_name: versions/v1\n\nnav:\n- Reference: \"reference.md\"\n- Changelog: \"changelog.md\"\n\nnav:\n- code-samples.md\n</code></pre> <p>Example submodule /v2/mkdocs.yml</p> <pre><code>    # It works the same as above, but with relative to the site_name we use here:\n#\n#   migrating.md -&gt; docs/versions/v2/migrating.md -&gt; http://localhost:8000/versions/v2/migrating/\n#   reference.md -&gt; docs/versions/v2/reference.md -&gt; http://localhost:8000/versions/v2/reference/\n#   changelog.md -&gt; docs/versions/v2/changelog.md -&gt; http://localhost:8000/versions/v2/changelog/\n\nsite_name: versions/v2\n\nnav:\n- Migrating to v2: \"migrating.md\"\n- Reference: \"reference.md\"\n- Changelog: \"changelog.md\"\n</code></pre> <p>An example filetree when using the Mkdocs Monorepo plugin looks like this:</p> <pre><code>$ tree .\n\n\u251c\u2500\u2500 docs\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 authentication.md\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 index.md\n\u251c\u2500\u2500 mkdocs.yml\n\u251c\u2500\u2500 v1\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 docs\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 changelog.md\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 reference.md\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 mkdocs.yml\n\u2514\u2500\u2500 v2\n    \u251c\u2500\u2500 docs\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 changelog.md\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 migrating.md\n    \u2502\u00a0\u00a0 \u2514\u2500\u2500 reference.md\n    \u2514\u2500\u2500 mkdocs.yml\n\n5 directories, 10 files\n</code></pre>"},{"location":"#supported-versions","title":"Supported Versions","text":"<ul> <li>Python 3 \u2014 3.7, 3.8, 3.9, 3.10, 3.11</li> <li>Mkdocs 1.0.4 and above.</li> </ul>"},{"location":"#license","title":"License","text":"<p>Released under the Apache 2.0 License. See here for more details.</p>"},{"location":"#contributing","title":"Contributing","text":"<p>Check out our CONTRIBUTING for more details.</p>"},{"location":"#extra-reading","title":"Extra Reading","text":"<ul> <li>mkdocs on GitHub</li> <li>Mkdocs documentation</li> <li>This was built using the mkdocs-plugin-template</li> </ul>"},{"location":"CHANGELOG/","title":"Changelog","text":""},{"location":"CHANGELOG/#110","title":"1.1.0","text":"<ul> <li>Dropped official support for Python 3.7</li> <li>Added official support for Python 3.12</li> <li>Replaced deprecated package <code>distutils</code> #118 courtesy of @PauloASilva and @piotr1212</li> </ul>"},{"location":"CHANGELOG/#104","title":"1.0.4","text":"<ul> <li>Resolve a bug that prevented this plugin from working with mkdocs &gt;= v1.4.0</li> </ul>"},{"location":"CHANGELOG/#103","title":"1.0.3","text":"<ul> <li>Allow no specification for both \u00b4nav\u00b4 and \u00b4docs_dir\u00b4</li> </ul>"},{"location":"CHANGELOG/#102","title":"1.0.2","text":"<ul> <li>Fixed edit URLs to use realpath of pages</li> </ul>"},{"location":"CHANGELOG/#101","title":"1.0.1","text":"<ul> <li>Fixed edit URLs for included pages</li> </ul>"},{"location":"CHANGELOG/#100","title":"1.0.0","text":"<ul> <li>This package has been promoted to v1.0!</li> </ul> <p>Note: Going forward, this package will follow semver conventions.</p>"},{"location":"CHANGELOG/#053","title":"0.5.3","text":"<ul> <li>Don't run on_serve if on_config was skipped</li> </ul>"},{"location":"CHANGELOG/#052","title":"0.5.2","text":"<ul> <li>Add support for wildcard include statement</li> </ul>"},{"location":"CHANGELOG/#051","title":"0.5.1","text":"<ul> <li>Fix <code>No module named 'slugify'</code> error when installing in mkdocs environments.</li> </ul>"},{"location":"CHANGELOG/#050","title":"0.5.0","text":"<ul> <li>Allow <code>mkdocs.yaml</code> in addition to <code>mkdocs.yml</code></li> <li>Drops support for Python 3.5 (because the minimum <code>mkdocs</code> version which   supports the above feature no longer supports it).</li> </ul>"},{"location":"CHANGELOG/#0418","title":"0.4.18","text":"<ul> <li>Allow inclusion of sub-docs <code>mkdocs.yml</code> even if its name isn't URL-friendly.   Works by slugifying non-URL friendly names. (#58)</li> </ul>"},{"location":"CHANGELOG/#0417","title":"0.4.17","text":"<ul> <li>Fixed bug where URLs in an included <code>mkdocs.yml</code> were prefixed by the <code>site_name</code> and thus did not support absolute URLs.</li> </ul>"},{"location":"CHANGELOG/#0416","title":"0.4.16","text":"<ul> <li>Fix <code>mkdocs serve</code> incompatibility when running with mkdocs &gt;= 1.2</li> </ul>"},{"location":"CHANGELOG/#0415","title":"0.4.15","text":"<ul> <li>Allow automatic <code>nav</code> generation if <code>docs_dir</code> is specified in the sub-docs <code>mkdocs.yml</code> file (#35)</li> </ul>"},{"location":"CHANGELOG/#0414","title":"0.4.14","text":"<ul> <li>Now respects the <code>docs_dir</code> config in <code>mkdocs.yml</code> (#44)</li> </ul>"},{"location":"CHANGELOG/#0413","title":"0.4.13","text":"<ul> <li>Allow other plugins to manipulate the source directory (#42)</li> </ul>"},{"location":"CHANGELOG/#0412","title":"0.4.12","text":"<ul> <li>Allow any config file name and not just <code>mkdocs.yml</code> (#36)</li> </ul>"},{"location":"CHANGELOG/#0411","title":"0.4.11","text":"<ul> <li>Moved repository to the Backstage organization</li> </ul>"},{"location":"CHANGELOG/#0410","title":"0.4.10","text":"<ul> <li>New fix for previous issue which doesn't break when site_name contains a slash</li> </ul>"},{"location":"CHANGELOG/#049","title":"0.4.9","text":"<ul> <li>Fix issue using plugin on Windows when site_name contains slash</li> </ul>"},{"location":"CHANGELOG/#048","title":"0.4.8","text":"<ul> <li>Dropped support for Python 3.4 in <code>setup.py</code></li> </ul>"},{"location":"CHANGELOG/#046","title":"0.4.6","text":"<ul> <li>Fixes compatibility issue with <code>mkdocs-git-revision-date-localized-plugin</code></li> </ul>"},{"location":"CHANGELOG/#045","title":"0.4.5","text":"<ul> <li>Bumped up <code>mkdocs</code> to 1.1.1 and added compatibility (gh-16)</li> </ul>"},{"location":"CHANGELOG/#044","title":"0.4.4","text":"<ul> <li>Bumped up <code>mkdocs</code> to 1.1 and <code>mkdocs-material</code> to 5.1.0</li> </ul>"},{"location":"CHANGELOG/#043","title":"0.4.3","text":"<ul> <li>Fixed bug with trailing slash in Windows (#9)</li> <li>Fixed bug with README</li> </ul>"},{"location":"CHANGELOG/#041","title":"0.4.1","text":"<ul> <li>Fixed bug with root <code>docs/</code> folder not working with livereload</li> <li>Fixed bug with <code>mkdocs.yml</code> in subfolders not working with livereload</li> </ul>"},{"location":"CHANGELOG/#040","title":"0.4.0","text":"<ul> <li>Initial release.</li> </ul>"},{"location":"CODE-OF-CONDUCT/","title":"Contributor Covenant Code of Conduct","text":""},{"location":"CODE-OF-CONDUCT/#our-pledge","title":"Our Pledge","text":"<p>In the interest of fostering an open and welcoming environment, we as contributors and maintainers pledge to making participation in our project and our community a harassment-free experience for everyone, regardless of age, body size, disability, ethnicity, sex characteristics, gender identity and expression, level of experience, education, socio-economic status, nationality, personal appearance, race, religion, or sexual identity and orientation.</p>"},{"location":"CODE-OF-CONDUCT/#our-standards","title":"Our Standards","text":"<p>Examples of behavior that contributes to creating a positive environment include:</p> <ul> <li>Using welcoming and inclusive language</li> <li>Being respectful of differing viewpoints and experiences</li> <li>Gracefully accepting constructive criticism</li> <li>Focusing on what is best for the community</li> <li>Showing empathy towards other community members</li> </ul> <p>Examples of unacceptable behavior by participants include:</p> <ul> <li>The use of sexualized language or imagery and unwelcome sexual attention or   advances</li> <li>Trolling, insulting/derogatory comments, and personal or political attacks</li> <li>Public or private harassment</li> <li>Publishing others' private information, such as a physical or electronic   address, without explicit permission</li> <li>Other conduct which could reasonably be considered inappropriate in a   professional setting</li> </ul>"},{"location":"CODE-OF-CONDUCT/#our-responsibilities","title":"Our Responsibilities","text":"<p>Project maintainers are responsible for clarifying the standards of acceptable behavior and are expected to take appropriate and fair corrective action in response to any instances of unacceptable behavior.</p> <p>Project maintainers have the right and responsibility to remove, edit, or reject comments, commits, code, wiki edits, issues, and other contributions that are not aligned to this Code of Conduct, or to ban temporarily or permanently any contributor for other behaviors that they deem inappropriate, threatening, offensive, or harmful.</p>"},{"location":"CODE-OF-CONDUCT/#scope","title":"Scope","text":"<p>This Code of Conduct applies within all project spaces, and it also applies when an individual is representing the project or its community in public spaces. Examples of representing a project or community include using an official project e-mail address, posting via an official social media account, or acting as an appointed representative at an online or offline event. Representation of a project may be further defined and clarified by project maintainers.</p>"},{"location":"CODE-OF-CONDUCT/#enforcement","title":"Enforcement","text":"<p>Instances of abusive, harassing, or otherwise unacceptable behavior may be reported by contacting the project team at fossboard@spotify.com. All complaints will be reviewed and investigated and will result in a response that is deemed necessary and appropriate to the circumstances. The project team is obligated to maintain confidentiality with regard to the reporter of an incident. Further details of specific enforcement policies may be posted separately.</p> <p>Project maintainers who do not follow or enforce the Code of Conduct in good faith may face temporary or permanent repercussions as determined by other members of the project's leadership.</p>"},{"location":"CODE-OF-CONDUCT/#attribution","title":"Attribution","text":"<p>This Code of Conduct is adapted from the Contributor Covenant, version 1.4, available at https://www.contributor-covenant.org/version/1/4/code-of-conduct.html</p> <p>For answers to common questions about this code of conduct, see https://www.contributor-covenant.org/faq</p>"},{"location":"CONTRIBUTING/","title":"Contributing","text":"<p>We welcome contributions! We believe that by fostering a healthy, inclusive, and active open source community that we will be able to build better software for all. A large part of that is by having an enforced code of conduct as well easy to use contributing guidelines.</p>"},{"location":"CONTRIBUTING/#prerequisites","title":"Prerequisites","text":"<ul> <li>Python 3+ or above (with Pip)</li> <li>Mkdocs 1.0.4 or above</li> <li>Docker</li> <li>Git</li> </ul>"},{"location":"CONTRIBUTING/#build-from-source","title":"Build from source","text":"<p>This part should be easy. If it's not, let us know! The first thing you'll want to do is import the repository and open up the directory.</p> <pre><code>$ git clone git@github.com:backstage/mkdocs-monorepo-plugin.git\n</code></pre> <p>Then using the <code>--editable</code> flag, you can install the package locally. This points the actual plugin to the folder which allows you to make changes dynamically without having to re-install it every time you want to test a change.</p> <pre><code>$ cd mkdocs-monorepo-plugin/\n$ pip install --editable .\n$ pip install -r requirements.txt\n</code></pre> <p>Great, now you have the <code>monorepo</code> plugin available in <code>Mkdocs</code>. This allows you to do the following in an <code>mkdocs.yml</code> without errors:</p> <pre><code>site_name: Example Site\n\nplugins:\n- monorepo\n</code></pre> <p>Of course, you'll need a folder to test it in. There is a conveniently folder named <code>sample-docs/</code> folder that you can use to test your changes, although you can run <code>mkdocs serve</code> in any project you want as long as the <code>mkdocs.yml</code> has <code>monorepo</code> mentioned in the <code>plugins</code> key.</p> <pre><code>$ cd sample-docs/\n$ mkdocs serve\n</code></pre> <p>Optionally, you can run it using Mkdocs Material which is what is powering the docs you're currently looking at. It makes Mkdocs really nice to work with. You can then simply pass through <code>--theme</code> to your <code>mkdocs serve</code> command like usual.</p> <pre><code>$ pip install mkdocs-material\n$ mkdocs serve --theme material\n</code></pre> <p>That's pretty much it. Experiment, play about, make the changes you need.</p>"},{"location":"CONTRIBUTING/#how-does-it-work","title":"How does it work?","text":"<p>Oh yes, that's worth mentioning! It works quite easily actually. There are two parts to the process: resolving the navigation, and merging the documentation folders.</p>"},{"location":"CONTRIBUTING/#resolving-the-navigation","title":"Resolving the navigation","text":"<p>This is responsible for making sure whenever you use the <code>!include</code> statement in <code>nav</code> inside our <code>mkdocs.yml</code> that we appropriately open up the included file, get the <code>nav</code>, and then appropriately import that into the root <code>nav</code>. So to give you an example:</p> <p>```yaml tab=\"Source mkdocs.yml files\"</p>"},{"location":"CONTRIBUTING/#mkdocsyml","title":"mkdocs.yml","text":"<p>site_name: Example Site</p> <p>plugins:   - monorepo</p> <p>nav:   - Getting Started: README.md   - Design: '!include teams/design/mkdocs.yml'   - Contributing: contributing.md</p>"},{"location":"CONTRIBUTING/#teamsdesignmkdocsyml","title":"teams/design/mkdocs.yml","text":"<p>site_name: design-folder-alias</p> <p>nav:   - Menus: components/menus.md   - Tabs: components/tabs.md   - Playback Buttons: components/playback-buttons.md <pre><code>```yaml tab=\"Output mkdocs.yml\"\nsite_name: Example Site\n\nplugins:\n  - monorepo\n\nnav:\n  - Getting Started: README.md\n  - Design:\n      - Menus: design-folder-alias/components/menus.md\n      - Tabs: design-folder-alias/components/tabs.md\n      - Playback Buttons: design-folder-alias/components/playback-buttons.md\n  - Contributing: contributing.md\n</code></pre></p> <p>Note that we've added a <code>design-folder-alias/</code> to the links under Design. This is because when merging the docs in the next step, it is not possible to meaningfully merge them all into a single <code>docs/</code> folder due to the likelihood of conflicts. Due to this, we made a design decision to repurpose the <code>site_name</code> to act as an alias when it is included in a monorepo context and uses this when it tries to create a \"single\" set of docs by using the alias as a folder.</p> <p>The Python code related to this component lives in <code>mkdocs_monorepo_plugin/parser.py</code>.</p>"},{"location":"CONTRIBUTING/#merging-the-docs-folders","title":"Merging the docs folders","text":"<p>This takes the work the resolver does and applies it to reality. It is responsible for creating a temporary folder using Python's <code>TemporaryFolder()</code> and moves the root <code>docs/</code> folder, as well as the <code>docs/</code> folders of all included paths from the root <code>nav</code>. As mentioned, it also takes their <code>site_name</code> values and uses that to indicate where it should be placed in our \"merged\" documentation folder.</p> <p>The Python code related to this component lives in <code>mkdocs_monorepo_plugin/merger.py</code>.</p>"},{"location":"CONTRIBUTING/#making-a-change","title":"Making a change","text":"<p>That's excellent! We're very happy that you'd like to contribute. We are very welcoming to any contributions. It is important to note a few things before you do so:</p> <ul> <li> <p>Consider opening an issue first. It's easy to fall into the trap to create a bug for something that isn't agreed upon. GitHub issues is a great way to act as a validator for your contribution ideas. We try our best to engage in these as much as possible to make this as painless as possible, as it's easier to write the code than discuss it. It also significantly reduces the chances of us rejecting it.</p> </li> <li> <p>Write tests. Of course, shipping stuff is pretty cool. Especially when it's a really nice improvement. In this case, there will have many others depending on our source code. It is a small ask for ask you to test your code in a basic capacity, so that it isn't prone to being broken or removed in the future accidentally. Adding complete test coverage is something we will suggest on a case-by-case basis, depending on the type of change it is.</p> </li> <li> <p>Not every contribution will be approved. Of course, given how much volunteered time you and others spend, it is a great way of saying thank you for to accept and merge every pull request - but in reality, doing so is more harmful than valuable. We want to leverage open source to make software better for everyone rather than for a few. This means considering the long-term value of changes, as well as any impact it may have - will it break existing integrations? will it slow performance? is this a convention others will understand? As a general rule of thumb, we highly encourage you open a GitHub issue first to discuss your ideas. It will help everyone in the long run for just a little bit more time.</p> </li> </ul> <p>That out of the way, here's what you need to do:</p> <pre><code>$ git checkout -b username/branch-name\n# ... make your changes\n$ code ./setup.py # make sure you bump up the version on line 6\n$ git add --patch # validate your changes\n$ git commit -m 'changed X and Y' # ensure you write a meaningful commit message\n$ git push -u origin HEAD\n</code></pre> <p>It might say you don't have permissions to push to our repository. That's alright, using hub fork you can fork the repository on GitHub and then replace the <code>origin</code> remote with your own directly from your Terminal:</p> <pre><code>$ hub fork --remote-name origin\n$ git remote rm origin\n$ git remote add origin git@github.com:[USERNAME]/mkdocs-monorepo-plugin.git\n$ git push -u origin HEAD\n$ hub pull-request -b spotify:master --message 'Pull request title' --browse # add --draft if you want to push it as a draft PR\n</code></pre> <p>This will create the pull request in our repository. You can of course do it through GitHub.com or their desktop clients too :)</p>"},{"location":"CONTRIBUTING/#running-tests","title":"Running tests","text":"<p>The command below will use Docker to run our test suites in numerous Python versions. It may take some time on first run, but should be very fast afterwards. When you're done, feel free to run <code>docker prune</code> to clear them from your local cache. We use the <code>slim</code> versions of the public <code>python</code> images from Docker Hub.</p> <pre><code>$ ./__tests__/test-local.sh\n</code></pre> <p>For faster tests, you can opt to run in Python 3.7 rather than all supported Python versions:</p> <pre><code>$ PYTHON_37_ONLY=1 ./__tests__/test-local.sh\n</code></pre> <p>GitHub Actions will always execute tests a little faster (due to parallelization) when you push your branch. Due to this, you can choose to opt of running them locally if you wish!</p>"},{"location":"CONTRIBUTING/#submitting-a-pr","title":"Submitting a PR","text":"<p>Feel free to open up a PR and share why you think this change is valuable (unless it's something obvious, like a typo or confirmed bug). Assuming it is a change that is wanted, a maintainer will take a look to see if there's any changes needed.</p> <p>To make a new release, make sure to update the version in <code>setup.py</code> and add a new entry in the CHANGELOG.md.</p>"},{"location":"limitations/","title":"Caveats / Known Design Decisions","text":"<ul> <li>In an included <code>mkdocs.yml</code>, you cannot have <code>!include</code>. It is only supported in the root <code>mkdocs.yml</code></li> </ul>"},{"location":"philosophy/","title":"Philosophy","text":"<p>This plugin is designed to solve documentation in large codebases \u2014 whether monorepos, monoliths or sizeable codebases in general \u2014 by enabling Mkdocs to be split out into smaller documentation folders. Then when shipping a change to production, merge the documentation together into a single, digestable site.</p> <p>Typically, in these large codebases, there is often complex ownership. Teams may own folders, files, or even parts of a single file. This localizes documentation to the code so it can seamlessly inherit ownership strategies designed for code, such as GitHub Codeowners.</p> <p>It was originally designed to improve the documentation process in Spotify's critical software, some which are monoliths with complex ownership across many teams, offices, and continents.</p>"}]}